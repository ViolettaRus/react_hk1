# React Login Form

## Цель репозитория

Этот проект создан для демонстрации использования новых хуков React 19: `use()`, `useFormStatus()` и `useActionState()`. Проект представляет собой полнофункциональную форму логина с современным дизайном и правильной архитектурой кода.

**Основная цель:** Изучение и практическое применение новых возможностей React 19 для работы с асинхронными операциями, формами и управлением состоянием.

## Задача / Проблема

### Функциональные требования:

1. **Загрузка данных пользователя через `use()`**
   - При загрузке компонента выполняется запрос к API для получения данных текущего пользователя
   - Используется хук `use()` для работы с промисами и Suspense

2. **Управление состоянием формы через `useActionState()`**
   - Форма логина использует `useActionState()` для управления состоянием отправки
   - Обработка состояний: `idle`, `loading`, `error`, `success`
   - Валидация email перед отправкой

3. **Отслеживание статуса формы через `useFormStatus()`**
   - Кнопка отправки отключается во время выполнения запроса
   - Отображение индикатора загрузки ("Logging in…")
   - Блокировка полей формы во время обработки

4. **Обновление UI без перезагрузки страницы**
   - После успешного логина выполняется API-запрос для получения данных пользователя
   - UI обновляется динамически, показывая приветствие с данными пользователя
   - Кнопка "Logout" сбрасывает состояние без перезагрузки страницы

### Решаемые проблемы:

- Демонстрация работы с асинхронными операциями через `use()`
- Управление состоянием формы без использования `useState` и `useEffect`
- Оптимизация UX через `useFormStatus()` для отслеживания статуса формы
- Правильная архитектура и декомпозиция компонентов
- Разделение стилей и логики

## Структура репозитория

```
react-login-form/
├── src/
│   ├── actions/              # Action функции для форм
│   │   └── loginAction.js   # Логика обработки формы логина
│   │
│   ├── components/          # React компоненты
│   │   ├── FormFields/      # Поля формы (email, password)
│   │   │   ├── FormFields.jsx
│   │   │   ├── FormFields.module.css
│   │   │   └── index.js
│   │   │
│   │   ├── SubmitButton/    # Кнопка отправки формы
│   │   │   ├── SubmitButton.jsx
│   │   │   ├── SubmitButton.module.css
│   │   │   └── index.js
│   │   │
│   │   ├── LoginCard/       # Карточка формы логина
│   │   │   ├── LoginCard.jsx
│   │   │   ├── LoginCard.module.css
│   │   │   └── index.js
│   │   │
│   │   ├── WelcomeCard/     # Карточка приветствия
│   │   │   ├── WelcomeCard.jsx
│   │   │   ├── WelcomeCard.module.css
│   │   │   └── index.js
│   │   │
│   │   └── index.js          # Централизованный экспорт компонентов
│   │
│   ├── styles/              # Глобальные стили и тема
│   │   ├── global.css       # CSS переменные, анимации, глобальные стили
│   │   ├── theme.js         # Объект темы (не используется, оставлен для совместимости)
│   │   └── index.js
│   │
│   ├── utils/               # Утилиты
│   │   ├── validation.js    # Функции валидации (email)
│   │   ├── api.js           # API функции (fetchUserData)
│   │   └── index.js
│   │
│   ├── App.jsx              # Корневой компонент приложения
│   ├── LoginForm.jsx        # Основной компонент формы логина
│   └── main.jsx             # Точка входа приложения
│
├── index.html               # HTML шаблон
├── vite.config.js           # Конфигурация Vite
├── package.json             # Зависимости и скрипты
└── README.md                # Документация
```

### Как всё взаимодействует:

1. **Точка входа:** `main.jsx` → `App.jsx` → `LoginForm.jsx`

2. **LoginForm.jsx:**
   - Использует `useActionState()` для управления состоянием формы
   - Использует `useState` и `useEffect` для отслеживания авторизованного пользователя
   - Рендерит `LoginCard` или `WelcomeCard` в зависимости от состояния

3. **LoginCard:**
   - Содержит форму с `FormFields` и `SubmitButton`
   - `FormFields` использует `useFormStatus()` для отслеживания статуса формы
   - `SubmitButton` использует `useFormStatus()` для отображения состояния загрузки

4. **loginAction:**
   - Валидирует email через `validateEmail()`
   - Выполняет API-запрос через `fetchUserData()`
   - Возвращает состояние (success/error) с данными пользователя

5. **WelcomeCard:**
   - Отображает данные пользователя после успешного логина
   - Кнопка "Logout" сбрасывает состояние

## Как запустить / использовать

### Предварительные требования:

- Node.js (версия 18 или выше)
- npm или yarn

### Установка:

```
# Клонировать репозиторий (если есть)
git clone <repository-url>
cd react-login-form

# Установить зависимости
npm install
```

### Запуск в режиме разработки:

```
npm run dev
```

Приложение будет доступно по адресу: `http://localhost:5173`

### Сборка для продакшена:

```
npm run build
```

### Предпросмотр продакшен-сборки:

```
npm run preview
```

## Как тестировать / проверять

### Функциональное тестирование:

1. **Тест загрузки пользователя:**
   - При открытии приложения должен выполниться запрос к API
   - Если пользователь найден, отображается экран приветствия
   - Если пользователь не найден, отображается форма логина

2. **Тест валидации формы:**
   - Попробуйте отправить форму с пустыми полями → должна появиться ошибка
   - Попробуйте ввести невалидный email (например, "test") → должна появиться ошибка валидации
   - Введите валидный email и пароль → форма должна отправиться

3. **Тест состояния загрузки:**
   - При отправке формы кнопка должна показать "Logging in…" и отключиться
   - Поля формы должны быть заблокированы во время загрузки
   - Должен отображаться спиннер загрузки

4. **Тест успешного логина:**
   - После успешной валидации должен выполниться API-запрос
   - Должен отобразиться экран приветствия с данными пользователя из API
   - Данные должны загружаться без перезагрузки страницы

5. **Тест выхода:**
   - Нажмите кнопку "Logout" → должен вернуться экран формы логина
   - Состояние должно сброситься без перезагрузки страницы

### Проверка в консоли браузера:

Откройте DevTools (F12) и проверьте:
- Нет ли ошибок в консоли
- Выполняются ли запросы к API (`https://jsonplaceholder.typicode.com/users/1`)
- Правильно ли работают хуки React

## Важные детали реализации

### Использованные React 19 хуки:

1. **`use(promise)`**
   - Используется для работы с промисами
   - Автоматически интегрируется с Suspense
   - В проекте: загрузка данных пользователя при инициализации

2. **`useActionState(action, initialState)`**
   - Управление состоянием формы через action функции
   - Возвращает `[state, formAction, isPending]`
   - В проекте: обработка логина с валидацией и API-запросом

3. **`useFormStatus()`**
   - Должен вызываться внутри компонента, который является потомком `<form>`
   - Предоставляет информацию о статусе последней отправки формы
   - В проекте: отслеживание состояния pending в `SubmitButton` и `FormFields`

### Архитектурные решения:

1. **Модульная структура:**
   - Каждый компонент в отдельной папке со своими стилями
   - Разделение логики (actions), утилит (utils) и компонентов
   - Централизованные экспорты через `index.js`

2. **CSS Modules:**
   - Стили изолированы для каждого компонента
   - CSS переменные для темы в `global.css`
   - Нет конфликтов имен классов

3. **Управление состоянием:**
   - `useActionState` для состояния формы
   - `useState` для отслеживания авторизованного пользователя
   - Разделение состояния формы и состояния авторизации

### API:

Проект использует публичный API для демонстрации:
- **Endpoint:** `https://jsonplaceholder.typicode.com/users/1`
- **Метод:** GET
- **Ответ:** JSON с данными пользователя

### Особенности:

- Полная валидация email перед отправкой
- Обработка ошибок при загрузке данных
- Плавные анимации и переходы
- Адаптивный дизайн
- Современный UI с градиентами и тенями
- Индикаторы загрузки и состояния

## Зависимости

- **react** (^19.0.0) - React библиотека
- **react-dom** (^19.0.0) - React DOM рендерер
- **vite** (^5.0.8) - Сборщик и dev-сервер
- **@vitejs/plugin-react** (^4.2.1) - Плагин Vite для React

## Стилизация

- CSS Modules для изоляции стилей компонентов
- CSS переменные для темы (цвета, отступы, тени)
- Анимации: fadeIn, shake, spin, slideDown
- Градиентный дизайн с современными эффектами

## Примечания

- Проект использует React 19, который может требовать Canary версию
- API запросы выполняются к публичному тестовому API
- Валидация email выполняется на клиенте
- Для продакшена необходимо добавить обработку ошибок сети и таймаутов

## Разработка

Для разработки рекомендуется:
- Использовать современный редактор с поддержкой React (VS Code, WebStorm)
- Установить расширения для React и ESLint
- Использовать React DevTools для отладки
